<code class='bash'>
dan@a78:~/ml4/public/class03demos $ psql.bash -f mvgavg5day.sql
CREATE TABLE prices5 AS 
SELECT
cdate
,closep
,AVG(closep)OVER(ORDER BY cdate ROWS BETWEEN 4 PRECEDING AND CURRENT ROW) mvgavg5day
FROM prices
WHERE cdate > '2016-08-01'
ORDER BY cdate;
SELECT 220
SELECT * FROM prices5 WHERE cdate BETWEEN '2016-08-01' AND '2016-08-31' ORDER BY cdate;
   cdate    |   closep   |      mvgavg5day      
------------+------------+----------------------
 2016-08-02 | 160.580002 | 160.5800020000000000
 2016-08-03 | 160.669998 | 160.6250000000000000
 2016-08-04 | 161.550003 | 160.9333343333333333
 2016-08-05 | 163.500000 | 161.5750007500000000
 2016-08-08 | 162.039993 | 161.6679992000000000
 2016-08-09 | 161.770004 | 161.9059996000000000
 2016-08-10 | 162.080002 | 162.1880004000000000
 2016-08-11 | 163.529999 | 162.5839996000000000
 2016-08-12 | 161.949997 | 162.2739990000000000
 2016-08-15 | 161.880005 | 162.2420014000000000
 2016-08-16 | 160.699997 | 162.0280000000000000
 2016-08-17 | 160.440002 | 161.7000000000000000
 2016-08-18 | 161.360001 | 161.2660004000000000
 2016-08-19 | 160.039993 | 160.8839996000000000
 2016-08-22 | 160.000000 | 160.5079986000000000
 2016-08-23 | 160.259995 | 160.4199982000000000
 2016-08-24 | 159.050003 | 160.1419984000000000
 2016-08-25 | 158.630005 | 159.5959992000000000
 2016-08-26 | 158.320007 | 159.2520020000000000
 2016-08-29 | 159.720001 | 159.1960022000000000
 2016-08-30 | 159.399994 | 159.0240020000000000
 2016-08-31 | 158.880005 | 158.9900024000000000
(22 rows)

dan@a78:~/ml4/public/class03demos $ 
dan@a78:~/ml4/public/class03demos $ 
dan@a78:~/ml4/public/class03demos $ 
</code>
