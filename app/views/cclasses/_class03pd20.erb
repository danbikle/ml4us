<code class='bash'>
ann=# 
ann=# SELECT max(closep)     FROM
ann-#   (SELECT cdate,closep FROM prices WHERE cdate > (SELECT MAX(cdate)-10 FROM prices)) iv;
    max     
------------
 155.179993
(1 row)

ann=# DROP   TABLE IF EXISTS prices2;
NOTICE:  table "prices2" does not exist, skipping
DROP TABLE
ann=# CREATE TABLE prices2 AS SELECT cdate,openp,closep FROM prices WHERE cdate > '2016-08-08';
SELECT 215
ann=# DROP   TABLE IF EXISTS prices3;
NOTICE:  table "prices3" does not exist, skipping
DROP TABLE
ann=# CREATE TABLE prices3 AS SELECT cdate,openp,closep, closep - openp AS diff FROM prices2;
SELECT 215
ann=# 
ann=#
</code>
